<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileCrypt README</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            border-bottom: 2px solid #2c3e50;
            padding-bottom: 10px;
        }
        h2 {
            margin-top: 20px;
        }
        pre, code {
            background-color: #e8ecef;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
        }
        pre {
            overflow-x: auto;
        }
        ul, ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        p {
            margin: 10px 0;
        }
        .warning {
            background-color: #fff3cd;
            padding: 10px;
            border-left: 4px solid #ffca28;
            margin: 10px 0;
        }
        a {
            color: #007bff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>FileCrypt</h1>
    <p>FileCrypt is a simple command-line interface (CLI) application written in Rust that encrypts or decrypts a file based on the presence of a magic header ("ENCR"). It uses AES-128-GCM for secure encryption and decryption with a hardcoded key.</p>

    <h2>Features</h2>
    <ul>
        <li>Automatically detects whether to encrypt or decrypt based on the "ENCR" magic header.</li>
        <li>Uses AES-128-GCM for authenticated encryption.</li>
        <li>Overwrites the input file with the encrypted or decrypted content.</li>
        <li>Simple CLI interface: just provide a file name.</li>
    </ul>

    <h2>Prerequisites</h2>
    <ul>
        <li>Rust (stable, latest version recommended)</li>
        <li>Cargo (Rust's package manager)</li>
    </ul>

    <h2>Installation</h2>
    <ol>
        <li>Clone or create a new Rust project:
            <pre><code>cargo new filecrypt
cd filecrypt</code></pre>
        </li>
        <li>Replace <code>src/main.rs</code> with the provided <code>main.rs</code> code.</li>
        <li>Update <code>Cargo.toml</code> with the required dependencies:
            <pre><code>[dependencies]
aes-gcm = "0.10"
generic-array = "0.14"
rand_core = "0.6"</code></pre>
        </li>
        <li>Build the project:
            <pre><code>cargo build --release</code></pre>
        </li>
    </ol>

    <h2>Usage</h2>
    <ol>
        <li>Run the application:
            <pre><code>cargo run --release</code></pre>
        </li>
        <li>Enter the name of the file you want to encrypt or decrypt when prompted.</li>
        <li>The application will:
            <ul>
                <li>Check if the file exists.</li>
                <li>Read the file and check for the "ENCR" magic header.</li>
                <li>If the header is present, decrypt the file (removing the header and IV).</li>
                <li>If the header is absent, encrypt the file (adding the header and a random IV).</li>
                <li>Overwrite the original file with the result.</li>
            </ul>
        </li>
        <li>A success message will indicate whether the file was encrypted or decrypted.</li>
    </ol>
    <p><strong>Example:</strong></p>
    <pre><code>Enter the file name:
example.txt
File detected as plaintext. Encrypting...
File encrypted successfully.</code></pre>
    <p>Running it again on the same file:</p>
    <pre><code>Enter the file name:
example.txt
File detected as encrypted. Decrypting...
File decrypted successfully.</code></pre>

    <h2>Notes</h2>
    <div class="warning">
        <strong>Security Warning:</strong> The encryption key is hardcoded (<code>[42u8; 16]</code>) for simplicity. In a production environment, use a secure, randomly generated key and implement proper key management.
    </div>
    <div class="warning">
        <strong>File Overwrite:</strong> The application overwrites the input file. For safety, consider backing up important files or modifying the code to write to a new file.
    </div>
    <ul>
        <li><strong>Error Handling:</strong> The program handles basic errors (e.g., file not found, invalid encrypted file format, decryption failures) and provides user-friendly error messages.</li>
        <li><strong>Dependencies:</strong> The application uses <code>aes-gcm</code> for encryption, <code>generic-array</code> for key handling, and <code>rand_core</code> for generating random IVs.</li>
    </ul>

    <h2>Limitations</h2>
    <ul>
        <li>The program reads the entire file into memory, which may not be suitable for very large files.</li>
        <li>No confirmation prompt before overwriting files.</li>
        <li>The hardcoded key reduces security for real-world applications.</li>
    </ul>

    <h2>License</h2>
    <p>This project is unlicensed and provided as-is for educational purposes.</p>

    <h2>Contributing</h2>
    <p>Feel free to fork the project and submit pull requests for improvements, such as:</p>
    <ul>
        <li>Adding a confirmation prompt before overwriting files.</li>
        <li>Supporting key input or key file management.</li>
        <li>Writing output to a separate file instead of overwriting.</li>
    </ul>
</body>
</html>